<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="cementerio_documento">
  <resultMap class="com.geopista.app.cementerios.business.vo.Documento"  id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    <result column="id_documento" jdbcType="INTEGER" property="idDocumento" />
    <result column="id_municipio" jdbcType="NUMERIC" property="idMunicipio" />
    <result column="nombre" jdbcType="VARCHAR" property="nombre" />
    <result column="fecha_alta" jdbcType="TIMESTAMP" property="fechaAlta" />
    <result column="fecha_modificacion" jdbcType="TIMESTAMP" property="fechaModificacion" />
    <result column="tipo" jdbcType="NUMERIC" property="tipo" />
    <result column="publico" jdbcType="NUMERIC" property="publico" />
    <result column="tamanio" jdbcType="NUMERIC" property="tamanio" />
    <result column="comentario" jdbcType="VARCHAR" property="comentario" />
    <result column="is_imgdoctext" jdbcType="CHAR" property="isImgdoctext" />
    <result column="oculto" jdbcType="NUMERIC" property="oculto" />
  </resultMap>
  
 <resultMap class="com.geopista.app.cementerios.business.vo.AnexoCementerioKey" id="AnexoCementerio_Result">
    <result column="id_documento" jdbcType="INTEGER" property="idDocumento" />
    <result column="id_elemcementerio" jdbcType="INTEGER" property="idElemcementerio" />
 </resultMap>
  
  <resultMap class="com.geopista.app.cementerios.business.vo.Documento" extends="cementerio_documento.ibatorgenerated_BaseResultMap" id="ibatorgenerated_ResultMapWithBLOBs">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    <result column="thumbnail" jdbcType="BINARY" property="thumbnail" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExampleWithBLOBs" parameterClass="com.geopista.app.cementerios.business.vo.DocumentoExample" resultMap="ibatorgenerated_ResultMapWithBLOBs">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    select id_documento, id_municipio, nombre, fecha_alta, fecha_modificacion, tipo, publico,
      tamanio, comentario, is_imgdoctext, oculto, thumbnail
    from cementerio.documento
    <isParameterPresent>
      <include refid="cementerio_documento.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByExample" parameterClass="com.geopista.app.cementerios.business.vo.DocumentoExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    select id_documento, id_municipio, nombre, fecha_alta, fecha_modificacion, tipo, publico,
      tamanio, comentario, is_imgdoctext, oculto
    from cementerio.documento
    <isParameterPresent>
      <include refid="cementerio_documento.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.geopista.app.cementerios.business.vo.Documento" resultMap="ibatorgenerated_ResultMapWithBLOBs">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    select id_documento, id_municipio, nombre, fecha_alta, fecha_modificacion, tipo, publico,
      tamanio, comentario, is_imgdoctext, oculto, thumbnail
    from cementerio.documento
    where id_documento = #idDocumento:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    delete from cementerio.documento
    where id_documento = #idDocumento:INTEGER#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    <selectKey keyProperty="idDocumento" resultClass="java.lang.Integer">
      SELECT nextVal('cementerio.documento_id_seq')
    </selectKey>
    insert into cementerio.documento (id_documento, id_municipio, nombre, fecha_alta,
      fecha_modificacion, tipo, publico, tamanio, comentario, is_imgdoctext, oculto, thumbnail)
    values (#idDocumento:INTEGER#, #idMunicipio:NUMERIC#, #nombre:VARCHAR#, #fechaAlta:TIMESTAMP#,
      #fechaModificacion:TIMESTAMP#, #tipo:NUMERIC#, #publico:NUMERIC#, #tamanio:NUMERIC#,
      #comentario:VARCHAR#, #isImgdoctext:CHAR#, #oculto:NUMERIC#, #thumbnail:BINARY#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    <selectKey keyProperty="idDocumento" resultClass="java.lang.Integer">
      SELECT nextVal('cementerio.documento_id_seq')
    </selectKey>
    insert into cementerio.documento
    <dynamic prepend="(">
      <isNotNull prepend="," property="idDocumento">
        id_documento
      </isNotNull>
      <isNotNull prepend="," property="idMunicipio">
        id_municipio
      </isNotNull>
      <isNotNull prepend="," property="nombre">
        nombre
      </isNotNull>
      <isNotNull prepend="," property="fechaAlta">
        fecha_alta
      </isNotNull>
      <isNotNull prepend="," property="fechaModificacion">
        fecha_modificacion
      </isNotNull>
      <isNotNull prepend="," property="tipo">
        tipo
      </isNotNull>
      <isNotNull prepend="," property="publico">
        publico
      </isNotNull>
      <isNotNull prepend="," property="tamanio">
        tamanio
      </isNotNull>
      <isNotNull prepend="," property="comentario">
        comentario
      </isNotNull>
      <isNotNull prepend="," property="isImgdoctext">
        is_imgdoctext
      </isNotNull>
      <isNotNull prepend="," property="oculto">
        oculto
      </isNotNull>
      <isNotNull prepend="," property="thumbnail">
        thumbnail
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="idDocumento">
        #idDocumento:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="idMunicipio">
        #idMunicipio:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="nombre">
        #nombre:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fechaAlta">
        #fechaAlta:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fechaModificacion">
        #fechaModificacion:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="tipo">
        #tipo:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="publico">
        #publico:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="tamanio">
        #tamanio:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="comentario">
        #comentario:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isImgdoctext">
        #isImgdoctext:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="oculto">
        #oculto:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="thumbnail">
        #thumbnail:BINARY#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    update cementerio.documento
    <dynamic prepend="set">
      <isNotNull prepend="," property="idMunicipio">
        id_municipio = #idMunicipio:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="nombre">
        nombre = #nombre:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fechaAlta">
        fecha_alta = #fechaAlta:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fechaModificacion">
        fecha_modificacion = #fechaModificacion:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="tipo">
        tipo = #tipo:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="publico">
        publico = #publico:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="tamanio">
        tamanio = #tamanio:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="comentario">
        comentario = #comentario:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isImgdoctext">
        is_imgdoctext = #isImgdoctext:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="oculto">
        oculto = #oculto:NUMERIC#
      </isNotNull>
      <isNotNull prepend="," property="thumbnail">
        thumbnail = #thumbnail:BINARY#
      </isNotNull>
    </dynamic>
    where id_documento = #idDocumento:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeyWithBLOBs" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    update cementerio.documento
    set id_municipio = #idMunicipio:NUMERIC#,
      nombre = #nombre:VARCHAR#,
      fecha_alta = #fechaAlta:TIMESTAMP#,
      fecha_modificacion = #fechaModificacion:TIMESTAMP#,
      tipo = #tipo:NUMERIC#,
      publico = #publico:NUMERIC#,
      tamanio = #tamanio:NUMERIC#,
      comentario = #comentario:VARCHAR#,
      is_imgdoctext = #isImgdoctext:CHAR#,
      oculto = #oculto:NUMERIC#,
      thumbnail = #thumbnail:BINARY#
    where id_documento = #idDocumento:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.geopista.app.cementerios.business.vo.Documento">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jun 07 11:18:50 CEST 2011.
    -->
    update cementerio.documento
    set id_municipio = #idMunicipio:NUMERIC#,
      nombre = #nombre:VARCHAR#,
      fecha_alta = #fechaAlta:TIMESTAMP#,
      fecha_modificacion = #fechaModificacion:TIMESTAMP#,
      tipo = #tipo:NUMERIC#,
      publico = #publico:NUMERIC#,
      tamanio = #tamanio:NUMERIC#,
      comentario = #comentario:VARCHAR#,
      is_imgdoctext = #isImgdoctext:CHAR#,
      oculto = #oculto:NUMERIC#
    where id_documento = #idDocumento:INTEGER#
  </update>
  <select id="selectAll" resultMap="ibatorgenerated_BaseResultMap">
    select id_documento, id_municipio, nombre, fecha_alta, fecha_modificacion, tipo, publico,
      tamanio, comentario, is_imgdoctext, oculto, thumbnail
    from cementerio.documento
  </select>
  <select id="selectAttached" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	select d.id_documento, d.nombre, d.tamanio, d.tipo, d.fecha_alta, d.fecha_modificacion, d.comentario, d.publico, d.id_municipio, 
        d.is_imgdoctext, d.thumbnail,  d.oculto
    from cementerio.documento d, cementerio.anexo_feature a 
    where a.id_documento=d.id_documento AND a.id_layer=#idLayer# AND a.id_feature=#idFeature# AND d.is_imgdoctext=#imgdoctext# ;
     AND d.publico=#publico# ORDER BY nombre DESC;
  </select>
  <select id="selectAttachedCementerio" parameterClass="java.util.Map" resultMap="ibatorgenerated_BaseResultMap">
	select d.id_documento, d.nombre, d.tamanio, d.tipo, d.fecha_alta, d.fecha_modificacion, d.comentario, d.publico, d.id_municipio, 
        d.is_imgdoctext, d.thumbnail, d.oculto
    from cementerio.documento d,  cementerio.anexo_cementerio a 
    where a.id_documento=d.id_documento AND a.id_elemcementerio=#idelemcementerio:INTEGER# and a.tipo=#idsuperpatron:VARCHAR# and a.subtipo=#idpatron:VARCHAR#
    order by nombre desc; 
 </select>
  <select id="selectByLastSeqKey" parameterClass="com.geopista.app.cementerios.business.vo.Documento" resultClass="java.lang.Integer">
	SELECT currval('cementerio.documento_id_seq');
  </select> 
</sqlMap>