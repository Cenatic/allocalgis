<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="geopista_layers_styles">
  <resultMap class="com.localgis.web.core.model.GeopistaLayersStyles" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Mar 31 17:21:03 CEST 2011.
    -->
    <result column="name" jdbcType="VARCHAR" property="layerName" />
    <result column="id_entidad" jdbcType="NUMERIC" property="idEntidad" />
    <result column="xml" jdbcType="VARCHAR" property="xmlStyle" />
  </resultMap>
  <select id="ibatorgenerated_selectByLayerName" parameterClass="com.localgis.web.core.model.GeopistaLayersStyles" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Mar 31 17:21:03 CEST 2011.
    -->
    select l.name, s.xml, ls.id_entidad 
    from public.layers l LEFT JOIN public.layers_styles ls ON (l.id_layer=ls.id_layer) LEFT JOIN styles s ON(ls.id_style=s.id_style) 
    where l.name = #layerName:VARCHAR# and (ls.id_entidad = #idEntidad:NUMERIC# or ls.id_entidad = 0) LIMIT 1
  </select>  
</sqlMap>